<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>From Zero to Production: A Practical Python Development Pipeline - 3&nbsp; Advancing Your Workflow</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../chapters/03-documentation.html" rel="next">
<link href="../chapters/01-foundation.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../chapters/02-workflow.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">From Zero to Production: A Practical Python Development Pipeline</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">From Zero to Production: A Practical Python Development Pipeline</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/michael-borck/python-dev-book" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Download" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download"><i class="bi bi-download"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="../From-Zero-to-Production--A-Practical-Python-Development-Pipeline.pdf">
              <i class="bi bi-bi-file-pdf pe-1"></i>
            Download PDF
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="../From-Zero-to-Production--A-Practical-Python-Development-Pipeline.epub">
              <i class="bi bi-bi-journal pe-1"></i>
            Download ePub
            </a>
          </li>
      </ul>
    </div>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/01-foundation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">From Zero to Production: A Practical Python Development Pipeline</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/02-workflow.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">From Zero to Production: A Practical Python Development Pipeline</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/03-documentation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">From Zero to Production: A Practical Python Development Pipeline</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/04-case-study.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">From Zero to Production: A Practical Python Development Pipeline</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/05-advanced-techniques.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">From Zero to Production: A Practical Python Development Pipeline</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/06-project-management.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">From Zero to Production: A Practical Python Development Pipeline</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/07-conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">From Zero to Production: A Practical Python Development Pipeline</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../acknowledgments.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">From Zero to Production: A Practical Python Development Pipeline</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">From Zero to Production: A Practical Python Development Pipeline</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../appendices/a-checklist.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">From Zero to Production: A Practical Python Development Pipeline</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../appendices/b-tools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">From Zero to Production: A Practical Python Development Pipeline</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../appendices/c-glossary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">From Zero to Production: A Practical Python Development Pipeline</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../appendices/d-bash-scaffold-script.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">From Zero to Production: A Practical Python Development Pipeline</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../appendices/e-cookiecutter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">E</span>&nbsp; <span class="chapter-title">From Zero to Production: A Practical Python Development Pipeline</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../appendices/f-ai-tools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">F</span>&nbsp; <span class="chapter-title">From Zero to Production: A Practical Python Development Pipeline</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#robust-dependency-management-with-pip-tools-and-uv" id="toc-robust-dependency-management-with-pip-tools-and-uv" class="nav-link active" data-scroll-target="#robust-dependency-management-with-pip-tools-and-uv"><span class="header-section-number">3.1</span> Robust Dependency Management with pip-tools and uv</a>
  <ul class="collapse">
  <li><a href="#the-problem-with-pip-freeze" id="toc-the-problem-with-pip-freeze" class="nav-link" data-scroll-target="#the-problem-with-pip-freeze"><span class="header-section-number">3.1.1</span> The Problem with <code>pip freeze</code></a></li>
  <li><a href="#solution-1-pip-tools" id="toc-solution-1-pip-tools" class="nav-link" data-scroll-target="#solution-1-pip-tools"><span class="header-section-number">3.1.2</span> Solution 1: pip-tools</a></li>
  <li><a href="#solution-2-uv" id="toc-solution-2-uv" class="nav-link" data-scroll-target="#solution-2-uv"><span class="header-section-number">3.1.3</span> Solution 2: uv</a></li>
  <li><a href="#choosing-between-pip-tools-and-uv" id="toc-choosing-between-pip-tools-and-uv" class="nav-link" data-scroll-target="#choosing-between-pip-tools-and-uv"><span class="header-section-number">3.1.4</span> Choosing Between pip-tools and uv</a></li>
  <li><a href="#best-practices-for-either-approach" id="toc-best-practices-for-either-approach" class="nav-link" data-scroll-target="#best-practices-for-either-approach"><span class="header-section-number">3.1.5</span> Best Practices for Either Approach</a></li>
  </ul></li>
  <li><a href="#code-quality-tools-with-ruff" id="toc-code-quality-tools-with-ruff" class="nav-link" data-scroll-target="#code-quality-tools-with-ruff"><span class="header-section-number">3.2</span> Code Quality Tools with Ruff</a>
  <ul class="collapse">
  <li><a href="#the-evolution-of-python-code-quality-tools" id="toc-the-evolution-of-python-code-quality-tools" class="nav-link" data-scroll-target="#the-evolution-of-python-code-quality-tools"><span class="header-section-number">3.2.1</span> The Evolution of Python Code Quality Tools</a></li>
  <li><a href="#why-ruff" id="toc-why-ruff" class="nav-link" data-scroll-target="#why-ruff"><span class="header-section-number">3.2.2</span> Why Ruff?</a></li>
  <li><a href="#getting-started-with-ruff" id="toc-getting-started-with-ruff" class="nav-link" data-scroll-target="#getting-started-with-ruff"><span class="header-section-number">3.2.3</span> Getting Started with Ruff</a></li>
  <li><a href="#basic-configuration" id="toc-basic-configuration" class="nav-link" data-scroll-target="#basic-configuration"><span class="header-section-number">3.2.4</span> Basic Configuration</a></li>
  <li><a href="#using-ruff-in-your-workflow" id="toc-using-ruff-in-your-workflow" class="nav-link" data-scroll-target="#using-ruff-in-your-workflow"><span class="header-section-number">3.2.5</span> Using Ruff in Your Workflow</a></li>
  <li><a href="#real-world-configuration-example" id="toc-real-world-configuration-example" class="nav-link" data-scroll-target="#real-world-configuration-example"><span class="header-section-number">3.2.6</span> Real-world Configuration Example</a></li>
  <li><a href="#integrating-ruff-into-your-editor" id="toc-integrating-ruff-into-your-editor" class="nav-link" data-scroll-target="#integrating-ruff-into-your-editor"><span class="header-section-number">3.2.7</span> Integrating Ruff into Your Editor</a></li>
  <li><a href="#gradually-adopting-ruff" id="toc-gradually-adopting-ruff" class="nav-link" data-scroll-target="#gradually-adopting-ruff"><span class="header-section-number">3.2.8</span> Gradually Adopting Ruff</a></li>
  <li><a href="#enforcing-code-quality-in-ci" id="toc-enforcing-code-quality-in-ci" class="nav-link" data-scroll-target="#enforcing-code-quality-in-ci"><span class="header-section-number">3.2.9</span> Enforcing Code Quality in CI</a></li>
  <li><a href="#beyond-ruff-when-to-consider-other-tools" id="toc-beyond-ruff-when-to-consider-other-tools" class="nav-link" data-scroll-target="#beyond-ruff-when-to-consider-other-tools"><span class="header-section-number">3.2.10</span> Beyond Ruff: When to Consider Other Tools</a></li>
  </ul></li>
  <li><a href="#automated-testing-with-pytest" id="toc-automated-testing-with-pytest" class="nav-link" data-scroll-target="#automated-testing-with-pytest"><span class="header-section-number">3.3</span> Automated Testing with pytest</a>
  <ul class="collapse">
  <li><a href="#why-testing-matters" id="toc-why-testing-matters" class="nav-link" data-scroll-target="#why-testing-matters"><span class="header-section-number">3.3.1</span> Why Testing Matters</a></li>
  <li><a href="#getting-started-with-pytest" id="toc-getting-started-with-pytest" class="nav-link" data-scroll-target="#getting-started-with-pytest"><span class="header-section-number">3.3.2</span> Getting Started with pytest</a></li>
  <li><a href="#writing-your-first-test" id="toc-writing-your-first-test" class="nav-link" data-scroll-target="#writing-your-first-test"><span class="header-section-number">3.3.3</span> Writing Your First Test</a></li>
  <li><a href="#running-tests" id="toc-running-tests" class="nav-link" data-scroll-target="#running-tests"><span class="header-section-number">3.3.4</span> Running Tests</a></li>
  <li><a href="#pytest-features-that-make-testing-easier" id="toc-pytest-features-that-make-testing-easier" class="nav-link" data-scroll-target="#pytest-features-that-make-testing-easier"><span class="header-section-number">3.3.5</span> pytest Features That Make Testing Easier</a></li>
  <li><a href="#test-coverage" id="toc-test-coverage" class="nav-link" data-scroll-target="#test-coverage"><span class="header-section-number">3.3.6</span> Test Coverage</a></li>
  <li><a href="#testing-best-practices" id="toc-testing-best-practices" class="nav-link" data-scroll-target="#testing-best-practices"><span class="header-section-number">3.3.7</span> Testing Best Practices</a></li>
  <li><a href="#common-testing-patterns" id="toc-common-testing-patterns" class="nav-link" data-scroll-target="#common-testing-patterns"><span class="header-section-number">3.3.8</span> Common Testing Patterns</a></li>
  <li><a href="#testing-strategy" id="toc-testing-strategy" class="nav-link" data-scroll-target="#testing-strategy"><span class="header-section-number">3.3.9</span> Testing Strategy</a></li>
  <li><a href="#continuous-testing" id="toc-continuous-testing" class="nav-link" data-scroll-target="#continuous-testing"><span class="header-section-number">3.3.10</span> Continuous Testing</a></li>
  </ul></li>
  <li><a href="#type-checking-with-mypy" id="toc-type-checking-with-mypy" class="nav-link" data-scroll-target="#type-checking-with-mypy"><span class="header-section-number">3.4</span> Type Checking with mypy</a>
  <ul class="collapse">
  <li><a href="#understanding-type-hints" id="toc-understanding-type-hints" class="nav-link" data-scroll-target="#understanding-type-hints"><span class="header-section-number">3.4.1</span> Understanding Type Hints</a></li>
  <li><a href="#getting-started-with-mypy" id="toc-getting-started-with-mypy" class="nav-link" data-scroll-target="#getting-started-with-mypy"><span class="header-section-number">3.4.2</span> Getting Started with mypy</a></li>
  <li><a href="#configuring-mypy" id="toc-configuring-mypy" class="nav-link" data-scroll-target="#configuring-mypy"><span class="header-section-number">3.4.3</span> Configuring mypy</a></li>
  <li><a href="#gradual-typing" id="toc-gradual-typing" class="nav-link" data-scroll-target="#gradual-typing"><span class="header-section-number">3.4.4</span> Gradual Typing</a></li>
  <li><a href="#essential-type-annotations" id="toc-essential-type-annotations" class="nav-link" data-scroll-target="#essential-type-annotations"><span class="header-section-number">3.4.5</span> Essential Type Annotations</a></li>
  <li><a href="#advanced-type-hints" id="toc-advanced-type-hints" class="nav-link" data-scroll-target="#advanced-type-hints"><span class="header-section-number">3.4.6</span> Advanced Type Hints</a></li>
  <li><a href="#common-challenges-and-solutions" id="toc-common-challenges-and-solutions" class="nav-link" data-scroll-target="#common-challenges-and-solutions"><span class="header-section-number">3.4.7</span> Common Challenges and Solutions</a></li>
  <li><a href="#integration-with-your-workflow" id="toc-integration-with-your-workflow" class="nav-link" data-scroll-target="#integration-with-your-workflow"><span class="header-section-number">3.4.8</span> Integration with Your Workflow</a></li>
  <li><a href="#benefits-of-type-checking" id="toc-benefits-of-type-checking" class="nav-link" data-scroll-target="#benefits-of-type-checking"><span class="header-section-number">3.4.9</span> Benefits of Type Checking</a></li>
  <li><a href="#when-to-use-type-hints" id="toc-when-to-use-type-hints" class="nav-link" data-scroll-target="#when-to-use-type-hints"><span class="header-section-number">3.4.10</span> When to Use Type Hints</a></li>
  </ul></li>
  <li><a href="#security-analysis-with-bandit" id="toc-security-analysis-with-bandit" class="nav-link" data-scroll-target="#security-analysis-with-bandit"><span class="header-section-number">3.5</span> Security Analysis with Bandit</a>
  <ul class="collapse">
  <li><a href="#understanding-security-static-analysis" id="toc-understanding-security-static-analysis" class="nav-link" data-scroll-target="#understanding-security-static-analysis"><span class="header-section-number">3.5.1</span> Understanding Security Static Analysis</a></li>
  <li><a href="#getting-started-with-bandit" id="toc-getting-started-with-bandit" class="nav-link" data-scroll-target="#getting-started-with-bandit"><span class="header-section-number">3.5.2</span> Getting Started with Bandit</a></li>
  <li><a href="#security-issues-bandit-can-detect" id="toc-security-issues-bandit-can-detect" class="nav-link" data-scroll-target="#security-issues-bandit-can-detect"><span class="header-section-number">3.5.3</span> Security Issues Bandit Can Detect</a></li>
  <li><a href="#configuring-bandit" id="toc-configuring-bandit" class="nav-link" data-scroll-target="#configuring-bandit"><span class="header-section-number">3.5.4</span> Configuring Bandit</a></li>
  <li><a href="#integrating-bandit-in-your-workflow" id="toc-integrating-bandit-in-your-workflow" class="nav-link" data-scroll-target="#integrating-bandit-in-your-workflow"><span class="header-section-number">3.5.5</span> Integrating Bandit in Your Workflow</a></li>
  <li><a href="#responding-to-security-findings" id="toc-responding-to-security-findings" class="nav-link" data-scroll-target="#responding-to-security-findings"><span class="header-section-number">3.5.6</span> Responding to Security Findings</a></li>
  <li><a href="#false-positives" id="toc-false-positives" class="nav-link" data-scroll-target="#false-positives"><span class="header-section-number">3.5.7</span> False Positives</a></li>
  </ul></li>
  <li><a href="#finding-dead-code-with-vulture" id="toc-finding-dead-code-with-vulture" class="nav-link" data-scroll-target="#finding-dead-code-with-vulture"><span class="header-section-number">3.6</span> Finding Dead Code with Vulture</a>
  <ul class="collapse">
  <li><a href="#the-problem-of-dead-code" id="toc-the-problem-of-dead-code" class="nav-link" data-scroll-target="#the-problem-of-dead-code"><span class="header-section-number">3.6.1</span> The Problem of Dead Code</a></li>
  <li><a href="#getting-started-with-vulture" id="toc-getting-started-with-vulture" class="nav-link" data-scroll-target="#getting-started-with-vulture"><span class="header-section-number">3.6.2</span> Getting Started with Vulture</a></li>
  <li><a href="#what-vulture-detects" id="toc-what-vulture-detects" class="nav-link" data-scroll-target="#what-vulture-detects"><span class="header-section-number">3.6.3</span> What Vulture Detects</a></li>
  <li><a href="#handling-false-positives" id="toc-handling-false-positives" class="nav-link" data-scroll-target="#handling-false-positives"><span class="header-section-number">3.6.4</span> Handling False Positives</a></li>
  <li><a href="#configuration-and-integration" id="toc-configuration-and-integration" class="nav-link" data-scroll-target="#configuration-and-integration"><span class="header-section-number">3.6.5</span> Configuration and Integration</a></li>
  <li><a href="#best-practices-for-dead-code-removal" id="toc-best-practices-for-dead-code-removal" class="nav-link" data-scroll-target="#best-practices-for-dead-code-removal"><span class="header-section-number">3.6.6</span> Best Practices for Dead Code Removal</a></li>
  <li><a href="#when-to-run-vulture" id="toc-when-to-run-vulture" class="nav-link" data-scroll-target="#when-to-run-vulture"><span class="header-section-number">3.6.7</span> When to Run Vulture</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/michael-borck/python-dev-book/edit/main/chapters/02-workflow.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/michael-borck/python-dev-book/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Advancing Your Workflow</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="robust-dependency-management-with-pip-tools-and-uv" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="robust-dependency-management-with-pip-tools-and-uv"><span class="header-section-number">3.1</span> Robust Dependency Management with pip-tools and uv</h2>
<p>As your projects grow in complexity or involve more developers, the basic <code>pip freeze &gt; requirements.txt</code> approach starts to show limitations. You need a dependency management system that gives you more control and ensures truly reproducible environments.</p>
<section id="the-problem-with-pip-freeze" class="level3" data-number="3.1.1">
<h3 data-number="3.1.1" class="anchored" data-anchor-id="the-problem-with-pip-freeze"><span class="header-section-number">3.1.1</span> The Problem with <code>pip freeze</code></h3>
<p>While <code>pip freeze</code> is convenient, it has several drawbacks:</p>
<ol type="1">
<li><p><strong>No distinction between direct and indirect dependencies</strong>: You can’t easily tell which packages you explicitly need versus those that were installed as dependencies of other packages.</p></li>
<li><p><strong>Maintenance challenges</strong>: When you want to update a package, you may need to regenerate the entire requirements file, potentially changing packages you didn’t intend to update.</p></li>
<li><p><strong>No environment synchronization</strong>: Installing from a requirements.txt file adds packages but doesn’t remove packages that are no longer needed.</p></li>
<li><p><strong>No explicit dependency specification</strong>: You can’t easily specify version ranges (e.g., “I need any Django 4.x version”) or extras.</p></li>
</ol>
<p>Let’s explore two powerful solutions: <code>pip-tools</code> and <code>uv</code>.</p>
</section>
<section id="solution-1-pip-tools" class="level3" data-number="3.1.2">
<h3 data-number="3.1.2" class="anchored" data-anchor-id="solution-1-pip-tools"><span class="header-section-number">3.1.2</span> Solution 1: pip-tools</h3>
<p>pip-tools introduces a two-file approach to dependency management:</p>
<ol type="1">
<li><code>requirements.in</code>: A manually maintained list of your direct dependencies, potentially with version constraints.</li>
<li><code>requirements.txt</code>: A generated lock file containing exact versions of all dependencies (direct and indirect).</li>
</ol>
<section id="getting-started-with-pip-tools" class="level4" data-number="3.1.2.1">
<h4 data-number="3.1.2.1" class="anchored" data-anchor-id="getting-started-with-pip-tools"><span class="header-section-number">3.1.2.1</span> Getting Started with pip-tools</h4>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install pip-tools in your virtual environment</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install pip-tools</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a requirements.in file with your direct dependencies</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> <span class="op">&gt;</span> requirements.in <span class="op">&lt;&lt; EOF</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="st">requests&gt;=2.25.0  # Use any version 2.25.0 or newer</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="st">flask==2.0.1      # Use exactly this version</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="st">pandas            # Use any version</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="op">EOF</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Compile the lock file</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="ex">pip-compile</span> requirements.in</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Install the exact dependencies</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="ex">pip-sync</span> requirements.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The generated <code>requirements.txt</code> will contain exact versions of your specified packages plus all their dependencies, including hashes for security.</p>
</section>
<section id="managing-development-dependencies" class="level4" data-number="3.1.2.2">
<h4 data-number="3.1.2.2" class="anchored" data-anchor-id="managing-development-dependencies"><span class="header-section-number">3.1.2.2</span> Managing Development Dependencies</h4>
<p>For a cleaner setup, you can separate production and development dependencies:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create requirements-dev.in</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> <span class="op">&gt;</span> requirements-dev.in <span class="op">&lt;&lt; EOF</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="st">-c requirements.txt  # Constraint: use same versions as in requirements.txt</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="st">pytest&gt;=7.0.0</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="st">pytest-cov</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="st">ruff</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="st">mypy</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="op">EOF</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Compile development dependencies</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="ex">pip-compile</span> requirements-dev.in <span class="at">-o</span> requirements-dev.txt</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Install all dependencies (both prod and dev)</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="ex">pip-sync</span> requirements.txt requirements-dev.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="updating-dependencies" class="level4" data-number="3.1.2.3">
<h4 data-number="3.1.2.3" class="anchored" data-anchor-id="updating-dependencies"><span class="header-section-number">3.1.2.3</span> Updating Dependencies</h4>
<p>When you need to update packages:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Update all packages to their latest allowed versions</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pip-compile</span> <span class="at">--upgrade</span> requirements.in</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Update a specific package</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="ex">pip-compile</span> <span class="at">--upgrade-package</span> requests requirements.in</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># After updating, sync your environment</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="ex">pip-sync</span> requirements.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="solution-2-uv" class="level3" data-number="3.1.3">
<h3 data-number="3.1.3" class="anchored" data-anchor-id="solution-2-uv"><span class="header-section-number">3.1.3</span> Solution 2: uv</h3>
<p><code>uv</code> is a newer, Rust-based tool that provides significant speed improvements while maintaining compatibility with existing Python packaging standards. It combines environment management, package installation, and dependency resolution in one tool.</p>
<section id="getting-started-with-uv" class="level4" data-number="3.1.3.1">
<h4 data-number="3.1.3.1" class="anchored" data-anchor-id="getting-started-with-uv"><span class="header-section-number">3.1.3.1</span> Getting Started with uv</h4>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install uv (globally with pipx or in your current environment)</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pipx</span> install uv</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Or: pip install uv</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a virtual environment (if needed)</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> venv</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Activate the environment as usual</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> .venv/bin/activate  <span class="co"># On Windows: .venv\Scripts\activate</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the same requirements.in file as above</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> <span class="op">&gt;</span> requirements.in <span class="op">&lt;&lt; EOF</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="st">requests&gt;=2.25.0</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="st">flask==2.0.1</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="st">pandas</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="op">EOF</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Compile the lock file</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> pip compile requirements.in <span class="at">-o</span> requirements.txt</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Install dependencies</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> pip sync requirements.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="key-advantages-of-uv" class="level4" data-number="3.1.3.2">
<h4 data-number="3.1.3.2" class="anchored" data-anchor-id="key-advantages-of-uv"><span class="header-section-number">3.1.3.2</span> Key Advantages of uv</h4>
<ol type="1">
<li><p><strong>Speed</strong>: uv is significantly faster than standard pip and pip-tools, especially for large dependency trees.</p></li>
<li><p><strong>Global caching</strong>: uv implements efficient caching, reducing redundant downloads across projects.</p></li>
<li><p><strong>Consolidated tooling</strong>: Acts as a replacement for multiple tools (pip, pip-tools, virtualenv) with a consistent interface.</p></li>
<li><p><strong>Enhanced dependency resolution</strong>: Often provides clearer error messages for dependency conflicts.</p></li>
</ol>
</section>
<section id="managing-dependencies-with-uv" class="level4" data-number="3.1.3.3">
<h4 data-number="3.1.3.3" class="anchored" data-anchor-id="managing-dependencies-with-uv"><span class="header-section-number">3.1.3.3</span> Managing Dependencies with uv</h4>
<p>uv supports the same workflow as pip-tools but with different commands:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># For development dependencies</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> <span class="op">&gt;</span> requirements-dev.in <span class="op">&lt;&lt; EOF</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="st">-c requirements.txt</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="st">pytest&gt;=7.0.0</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="st">pytest-cov</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="st">ruff</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="st">mypy</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="op">EOF</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Compile dev dependencies</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> pip compile requirements-dev.in <span class="at">-o</span> requirements-dev.txt</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Install all dependencies</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> pip sync requirements.txt requirements-dev.txt</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Update a specific package</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> pip compile <span class="at">--upgrade-package</span> requests requirements.in</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="choosing-between-pip-tools-and-uv" class="level3" data-number="3.1.4">
<h3 data-number="3.1.4" class="anchored" data-anchor-id="choosing-between-pip-tools-and-uv"><span class="header-section-number">3.1.4</span> Choosing Between pip-tools and uv</h3>
<p>Both tools solve the core problem of creating reproducible environments, but with different tradeoffs:</p>
<table class="table">
<colgroup>
<col style="width: 36%">
<col style="width: 50%">
<col style="width: 13%">
</colgroup>
<thead>
<tr class="header">
<th>Factor</th>
<th>pip-tools</th>
<th>uv</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Speed</td>
<td>Good</td>
<td>Excellent (often 10x+ faster)</td>
</tr>
<tr class="even">
<td>Installation</td>
<td>Simple Python package</td>
<td>External tool (but simple to install)</td>
</tr>
<tr class="odd">
<td>Maturity</td>
<td>Well-established</td>
<td>Newer but rapidly maturing</td>
</tr>
<tr class="even">
<td>Functionality</td>
<td>Focused on dependency locking</td>
<td>Broader tool combining multiple functions</td>
</tr>
<tr class="odd">
<td>Learning curve</td>
<td>Minimal</td>
<td>Minimal (designed for compatibility)</td>
</tr>
</tbody>
</table>
<p>For beginners or smaller projects, pip-tools offers a gentle introduction to proper dependency management with minimal new concepts. For larger projects or when speed becomes important, uv provides significant benefits with a similar workflow.</p>
</section>
<section id="best-practices-for-either-approach" class="level3" data-number="3.1.5">
<h3 data-number="3.1.5" class="anchored" data-anchor-id="best-practices-for-either-approach"><span class="header-section-number">3.1.5</span> Best Practices for Either Approach</h3>
<p>Regardless of which tool you choose:</p>
<ol type="1">
<li><p><strong>Commit both <code>.in</code> and <code>.txt</code> files</strong> to version control. The <code>.in</code> files represent your intent, while the <code>.txt</code> files ensure reproducibility.</p></li>
<li><p><strong>Use constraints carefully</strong>. Start with loose constraints (just package names) and add version constraints only when needed.</p></li>
<li><p><strong>Regularly update dependencies</strong> to get security fixes, using <code>--upgrade</code> or <code>--upgrade-package</code>.</p></li>
<li><p><strong>Always use <code>pip-sync</code> or <code>uv pip sync</code></strong> instead of <code>pip install -r requirements.txt</code> to ensure your environment exactly matches the lock file.</p></li>
</ol>
<p>In the next section, we’ll explore how to maintain code quality through automated formatting and linting with Ruff, taking your workflow to the next professional level.</p>
</section>
</section>
<section id="code-quality-tools-with-ruff" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="code-quality-tools-with-ruff"><span class="header-section-number">3.2</span> Code Quality Tools with Ruff</h2>
<p>Writing code that works is only part of the development process. Code should also be readable, maintainable, and free from common errors. This is where code quality tools come in, helping you enforce consistent style and catch potential issues early.</p>
<section id="the-evolution-of-python-code-quality-tools" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="the-evolution-of-python-code-quality-tools"><span class="header-section-number">3.2.1</span> The Evolution of Python Code Quality Tools</h3>
<p>Traditionally, Python developers used multiple specialized tools:</p>
<ul>
<li><strong>Black</strong> for code formatting</li>
<li><strong>isort</strong> for import sorting</li>
<li><strong>Flake8</strong> for linting (style checks)</li>
<li><strong>Pylint</strong> for deeper static analysis</li>
</ul>
<p>While effective, maintaining configuration for all these tools was cumbersome. Enter Ruff – a modern, Rust-based tool that combines formatting and linting in one incredibly fast package.</p>
</section>
<section id="why-ruff" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="why-ruff"><span class="header-section-number">3.2.2</span> Why Ruff?</h3>
<p>Ruff offers several compelling advantages:</p>
<ol type="1">
<li><strong>Speed</strong>: Often 10-100x faster than traditional Python linters</li>
<li><strong>Consolidation</strong>: Replaces multiple tools with one consistent interface</li>
<li><strong>Compatibility</strong>: Implements rules from established tools (Flake8, Black, isort, etc.)</li>
<li><strong>Configuration</strong>: Single configuration in your pyproject.toml file</li>
<li><strong>Automatic fixing</strong>: Can automatically fix many issues it identifies</li>
</ol>
</section>
<section id="getting-started-with-ruff" class="level3" data-number="3.2.3">
<h3 data-number="3.2.3" class="anchored" data-anchor-id="getting-started-with-ruff"><span class="header-section-number">3.2.3</span> Getting Started with Ruff</h3>
<p>First, install Ruff in your virtual environment:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># If using pip</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install ruff</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># If using uv</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> pip install ruff</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="basic-configuration" class="level3" data-number="3.2.4">
<h3 data-number="3.2.4" class="anchored" data-anchor-id="basic-configuration"><span class="header-section-number">3.2.4</span> Basic Configuration</h3>
<p>Configure Ruff in your <code>pyproject.toml</code> file:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[</span><span class="dt">tool</span><span class="kw">.</span><span class="dt">ruff</span><span class="kw">]</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Enable pycodestyle, Pyflakes, isort, and more</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="dt">select</span> <span class="op">=</span> <span class="op">[</span><span class="st">"E"</span><span class="op">,</span> <span class="st">"F"</span><span class="op">,</span> <span class="st">"I"</span><span class="op">]</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="dt">ignore</span> <span class="op">=</span> <span class="op">[]</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Allow lines to be as long as 100 characters</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="dt">line-length</span> <span class="op">=</span> <span class="dv">100</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Assume Python 3.10</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="dt">target-version</span> <span class="op">=</span> <span class="st">"py310"</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="kw">[</span><span class="dt">tool</span><span class="kw">.</span><span class="dt">ruff</span><span class="kw">.</span><span class="dt">format</span><span class="kw">]</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Formats code similar to Black (this is the default)</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="dt">quote-style</span> <span class="op">=</span> <span class="st">"double"</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="dt">indent-style</span> <span class="op">=</span> <span class="st">"space"</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="dt">line-ending</span> <span class="op">=</span> <span class="st">"auto"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This configuration enables: - <code>E</code> rules from pycodestyle (PEP 8 style guide) - <code>F</code> rules from Pyflakes (logical and syntax error detection) - <code>I</code> rules for import sorting (like isort)</p>
</section>
<section id="using-ruff-in-your-workflow" class="level3" data-number="3.2.5">
<h3 data-number="3.2.5" class="anchored" data-anchor-id="using-ruff-in-your-workflow"><span class="header-section-number">3.2.5</span> Using Ruff in Your Workflow</h3>
<p>Ruff provides two main commands:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check code for issues without changing it</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ruff</span> check .</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Format code (similar to Black)</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="ex">ruff</span> format .</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To automatically fix issues that Ruff can solve:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fix all auto-fixable issues</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ruff</span> check <span class="at">--fix</span> .</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="real-world-configuration-example" class="level3" data-number="3.2.6">
<h3 data-number="3.2.6" class="anchored" data-anchor-id="real-world-configuration-example"><span class="header-section-number">3.2.6</span> Real-world Configuration Example</h3>
<p>Here’s a more comprehensive configuration that balances strictness with practicality:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[</span><span class="dt">tool</span><span class="kw">.</span><span class="dt">ruff</span><span class="kw">]</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Target Python version</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="dt">target-version</span> <span class="op">=</span> <span class="st">"py39"</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Line length</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="dt">line-length</span> <span class="op">=</span> <span class="dv">88</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Enable a comprehensive set of rules</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="dt">select</span> <span class="op">=</span> <span class="op">[</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"E"</span><span class="op">,</span>   <span class="co"># pycodestyle errors</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"F"</span><span class="op">,</span>   <span class="co"># pyflakes</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"I"</span><span class="op">,</span>   <span class="co"># isort</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"W"</span><span class="op">,</span>   <span class="co"># pycodestyle warnings</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"C90"</span><span class="op">,</span> <span class="co"># mccabe complexity</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"N"</span><span class="op">,</span>   <span class="co"># pep8-naming</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"B"</span><span class="op">,</span>   <span class="co"># flake8-bugbear</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"UP"</span><span class="op">,</span>  <span class="co"># pyupgrade</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"D"</span><span class="op">,</span>   <span class="co"># pydocstyle</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="op">]</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Ignore specific rules</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="dt">ignore</span> <span class="op">=</span> <span class="op">[</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>    <span class="st">"E203"</span><span class="op">,</span>  <span class="co"># Whitespace before ':' (handled by formatter)</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">"D100"</span><span class="op">,</span>  <span class="co"># Missing docstring in public module</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">"D104"</span><span class="op">,</span>  <span class="co"># Missing docstring in public package</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="op">]</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Exclude certain files/directories from checking</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a><span class="dt">exclude</span> <span class="op">=</span> <span class="op">[</span></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>    <span class="st">".git"</span><span class="op">,</span></span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>    <span class="st">".venv"</span><span class="op">,</span></span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>    <span class="st">"__pycache__"</span><span class="op">,</span></span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>    <span class="st">"build"</span><span class="op">,</span></span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">"dist"</span><span class="op">,</span></span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a><span class="op">]</span></span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a><span class="kw">[</span><span class="dt">tool</span><span class="kw">.</span><span class="dt">ruff</span><span class="kw">.</span><span class="dt">pydocstyle</span><span class="kw">]</span></span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Use Google-style docstrings</span></span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a><span class="dt">convention</span> <span class="op">=</span> <span class="st">"google"</span></span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a><span class="kw">[</span><span class="dt">tool</span><span class="kw">.</span><span class="dt">ruff</span><span class="kw">.</span><span class="dt">mccabe</span><span class="kw">]</span></span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Maximum McCabe complexity allowed</span></span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a><span class="dt">max-complexity</span> <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a><span class="kw">[</span><span class="dt">tool</span><span class="kw">.</span><span class="dt">ruff</span><span class="kw">.</span><span class="dt">format</span><span class="kw">]</span></span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Formatting options (black-compatible by default)</span></span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a><span class="dt">quote-style</span> <span class="op">=</span> <span class="st">"double"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="integrating-ruff-into-your-editor" class="level3" data-number="3.2.7">
<h3 data-number="3.2.7" class="anchored" data-anchor-id="integrating-ruff-into-your-editor"><span class="header-section-number">3.2.7</span> Integrating Ruff into Your Editor</h3>
<p>Ruff provides editor integrations for:</p>
<ul>
<li>VS Code (via the Ruff extension)</li>
<li>PyCharm (via third-party plugin)</li>
<li>Vim/Neovim</li>
<li>Emacs</li>
</ul>
<p>For example, in VS Code, install the Ruff extension and add to your settings.json:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"editor.formatOnSave"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"editor.codeActionsOnSave"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"source.fixAll.ruff"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"source.organizeImports.ruff"</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This configuration automatically formats code and fixes issues whenever you save a file.</p>
</section>
<section id="gradually-adopting-ruff" class="level3" data-number="3.2.8">
<h3 data-number="3.2.8" class="anchored" data-anchor-id="gradually-adopting-ruff"><span class="header-section-number">3.2.8</span> Gradually Adopting Ruff</h3>
<p>If you’re working with an existing codebase, you can adopt Ruff gradually:</p>
<ol type="1">
<li><strong>Start with formatting only</strong>: Begin with <code>ruff format</code> to establish consistent formatting</li>
<li><strong>Add basic linting</strong>: Enable a few rule sets like <code>E</code>, <code>F</code>, and <code>I</code></li>
<li><strong>Gradually increase strictness</strong>: Add more rule sets as your team adjusts</li>
<li><strong>Use per-file ignores</strong>: For specific issues in specific files</li>
</ol>
<div class="sourceCode" id="cb12"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[</span><span class="dt">tool</span><span class="kw">.</span><span class="dt">ruff</span><span class="kw">.</span><span class="dt">per-file-ignores</span><span class="kw">]</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="dt">"tests/*"</span> <span class="op">=</span> <span class="op">[</span><span class="st">"D103"</span><span class="op">]</span>  <span class="co"># Ignore missing docstrings in tests</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="dt">"__init__.py"</span> <span class="op">=</span> <span class="op">[</span><span class="st">"F401"</span><span class="op">]</span>  <span class="co"># Ignore unused imports in __init__.py</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="enforcing-code-quality-in-ci" class="level3" data-number="3.2.9">
<h3 data-number="3.2.9" class="anchored" data-anchor-id="enforcing-code-quality-in-ci"><span class="header-section-number">3.2.9</span> Enforcing Code Quality in CI</h3>
<p>Add Ruff to your CI pipeline to ensure code quality standards are maintained:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># In your GitHub Actions workflow (.github/workflows/ci.yml)</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Check formatting with Ruff</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run</span><span class="kw">:</span><span class="at"> ruff format --check .</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Lint with Ruff</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run</span><span class="kw">:</span><span class="at"> ruff check .</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The <code>--check</code> flag on <code>ruff format</code> makes it exit with an error if files would be reformatted, instead of actually changing them.</p>
</section>
<section id="beyond-ruff-when-to-consider-other-tools" class="level3" data-number="3.2.10">
<h3 data-number="3.2.10" class="anchored" data-anchor-id="beyond-ruff-when-to-consider-other-tools"><span class="header-section-number">3.2.10</span> Beyond Ruff: When to Consider Other Tools</h3>
<p>While Ruff covers a wide range of code quality checks, some specific needs might require additional tools:</p>
<ul>
<li><strong>mypy</strong> for static type checking (covered in a later section)</li>
<li><strong>bandit</strong> for security-focused checks</li>
<li><strong>vulture</strong> for finding dead code</li>
</ul>
<p>However, Ruff’s rule set continues to expand, potentially reducing the need for these additional tools over time.</p>
<p>By incorporating Ruff into your workflow, you’ll catch many common errors before they reach production and maintain a consistent, readable codebase. In the next section, we’ll explore how to ensure your code works as expected through automated testing with pytest.</p>
</section>
</section>
<section id="automated-testing-with-pytest" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="automated-testing-with-pytest"><span class="header-section-number">3.3</span> Automated Testing with pytest</h2>
<p>Testing is a crucial aspect of software development that ensures your code works as intended and continues to work as you make changes. Python’s testing ecosystem offers numerous frameworks, but pytest has emerged as the most popular and powerful choice for most projects.</p>
<section id="why-testing-matters" class="level3" data-number="3.3.1">
<h3 data-number="3.3.1" class="anchored" data-anchor-id="why-testing-matters"><span class="header-section-number">3.3.1</span> Why Testing Matters</h3>
<p>Automated tests provide several key benefits:</p>
<ol type="1">
<li><strong>Verification</strong>: Confirm that your code works as expected</li>
<li><strong>Regression prevention</strong>: Catch when changes break existing functionality</li>
<li><strong>Documentation</strong>: Tests demonstrate how code is meant to be used</li>
<li><strong>Refactoring confidence</strong>: Change code structure while ensuring behavior remains correct</li>
<li><strong>Design feedback</strong>: Difficult-to-test code often indicates design problems</li>
</ol>
</section>
<section id="getting-started-with-pytest" class="level3" data-number="3.3.2">
<h3 data-number="3.3.2" class="anchored" data-anchor-id="getting-started-with-pytest"><span class="header-section-number">3.3.2</span> Getting Started with pytest</h3>
<p>First, install pytest in your virtual environment:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Standard installation</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install pytest</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co"># With coverage reporting</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install pytest pytest-cov</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="writing-your-first-test" class="level3" data-number="3.3.3">
<h3 data-number="3.3.3" class="anchored" data-anchor-id="writing-your-first-test"><span class="header-section-number">3.3.3</span> Writing Your First Test</h3>
<p>Let’s assume you have a simple function in <code>src/my_package/calculations.py</code>:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add(a, b):</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Add two numbers and return the result."""</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">+</span> b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Create a test file in <code>tests/test_calculations.py</code>:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> my_package.calculations <span class="im">import</span> add</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_add():</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Test basic addition</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> add(<span class="dv">1</span>, <span class="dv">2</span>) <span class="op">==</span> <span class="dv">3</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Test with negative numbers</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> add(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>) <span class="op">==</span> <span class="dv">0</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> add(<span class="op">-</span><span class="dv">1</span>, <span class="op">-</span><span class="dv">1</span>) <span class="op">==</span> <span class="op">-</span><span class="dv">2</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Test with floating point</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> add(<span class="fl">1.5</span>, <span class="fl">2.5</span>) <span class="op">==</span> <span class="fl">4.0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="running-tests" class="level3" data-number="3.3.4">
<h3 data-number="3.3.4" class="anchored" data-anchor-id="running-tests"><span class="header-section-number">3.3.4</span> Running Tests</h3>
<p>Run all tests from your project root:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Run all tests</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pytest</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Run with more detail</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="ex">pytest</span> <span class="at">-v</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Run a specific test file</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="ex">pytest</span> tests/test_calculations.py</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Run a specific test function</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="ex">pytest</span> tests/test_calculations.py::test_add</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="pytest-features-that-make-testing-easier" class="level3" data-number="3.3.5">
<h3 data-number="3.3.5" class="anchored" data-anchor-id="pytest-features-that-make-testing-easier"><span class="header-section-number">3.3.5</span> pytest Features That Make Testing Easier</h3>
<p>pytest has several features that make it superior to Python’s built-in unittest framework:</p>
<section id="simple-assertions" class="level4" data-number="3.3.5.1">
<h4 data-number="3.3.5.1" class="anchored" data-anchor-id="simple-assertions"><span class="header-section-number">3.3.5.1</span> 1. Simple Assertions</h4>
<p>Instead of methods like <code>assertEqual</code> or <code>assertTrue</code>, pytest lets you use Python’s built-in <code>assert</code> statement, making tests more readable.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With pytest</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> result <span class="op">==</span> expected</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Instead of unittest's</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="va">self</span>.assertEqual(result, expected)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="fixtures" class="level4" data-number="3.3.5.2">
<h4 data-number="3.3.5.2" class="anchored" data-anchor-id="fixtures"><span class="header-section-number">3.3.5.2</span> 2. Fixtures</h4>
<p>Fixtures are a powerful way to set up preconditions for your tests:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pytest</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> my_package.database <span class="im">import</span> Database</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="at">@pytest.fixture</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> db():</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Provide a clean database instance for tests."""</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    db <span class="op">=</span> Database(<span class="st">":memory:"</span>)  <span class="co"># Use in-memory SQLite</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    db.create_tables()</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">yield</span> db</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>    db.close()  <span class="co"># Cleanup happens after the test</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_save_record(db):</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># The db fixture is automatically provided</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>    record <span class="op">=</span> {<span class="st">"id"</span>: <span class="dv">1</span>, <span class="st">"name"</span>: <span class="st">"Test"</span>}</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>    db.save(record)</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> db.get(<span class="dv">1</span>) <span class="op">==</span> record</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="parameterized-tests" class="level4" data-number="3.3.5.3">
<h4 data-number="3.3.5.3" class="anchored" data-anchor-id="parameterized-tests"><span class="header-section-number">3.3.5.3</span> 3. Parameterized Tests</h4>
<p>Test multiple inputs without repetitive code:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pytest</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> my_package.calculations <span class="im">import</span> add</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="at">@pytest.mark.parametrize</span>(<span class="st">"a, b, expected"</span>, [</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    (<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>),</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    (<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    (<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>),</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    (<span class="fl">1.5</span>, <span class="fl">2.5</span>, <span class="fl">4.0</span>),</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_add_parametrized(a, b, expected):</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> add(a, b) <span class="op">==</span> expected</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="marks-for-test-organization" class="level4" data-number="3.3.5.4">
<h4 data-number="3.3.5.4" class="anchored" data-anchor-id="marks-for-test-organization"><span class="header-section-number">3.3.5.4</span> 4. Marks for Test Organization</h4>
<p>Organize tests with marks:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="at">@pytest.mark.slow</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_complex_calculation():</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># This test takes a long time</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    ...</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Run only tests marked as 'slow'</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co"># pytest -m slow</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="at">@pytest.mark.skip</span>(reason<span class="op">=</span><span class="st">"Feature not implemented yet"</span>)</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_future_feature():</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>    ...</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="at">@pytest.mark.xfail</span>(reason<span class="op">=</span><span class="st">"Known bug #123"</span>)</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_buggy_function():</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>    ...</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="test-coverage" class="level3" data-number="3.3.6">
<h3 data-number="3.3.6" class="anchored" data-anchor-id="test-coverage"><span class="header-section-number">3.3.6</span> Test Coverage</h3>
<p>Track which parts of your code are tested using pytest-cov:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Run tests with coverage report</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pytest</span> <span class="at">--cov</span><span class="op">=</span>src/my_package</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate HTML report for detailed analysis</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="ex">pytest</span> <span class="at">--cov</span><span class="op">=</span>src/my_package <span class="at">--cov-report</span><span class="op">=</span>html</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Then open htmlcov/index.html in your browser</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>A coverage report helps identify untested code:</p>
<pre><code>----------- coverage: platform linux, python 3.9.5-final-0 -----------
Name                             Stmts   Miss  Cover
----------------------------------------------------
src/my_package/__init__.py           1      0   100%
src/my_package/calculations.py      10      2    80%
src/my_package/models.py            45     15    67%
----------------------------------------------------
TOTAL                               56     17    70%</code></pre>
</section>
<section id="testing-best-practices" class="level3" data-number="3.3.7">
<h3 data-number="3.3.7" class="anchored" data-anchor-id="testing-best-practices"><span class="header-section-number">3.3.7</span> Testing Best Practices</h3>
<ol type="1">
<li><strong>Write tests as you develop</strong>: Don’t wait until the end</li>
<li><strong>Name tests clearly</strong>: Include the function name and scenario being tested</li>
<li><strong>One assertion per test</strong>: Focus each test on a single behavior</li>
<li><strong>Test edge cases</strong>: Empty input, boundary values, error conditions</li>
<li><strong>Avoid test interdependence</strong>: Tests should work independently</li>
<li><strong>Mock external dependencies</strong>: APIs, databases, file systems</li>
<li><strong>Keep tests fast</strong>: Slow tests get run less often</li>
</ol>
</section>
<section id="common-testing-patterns" class="level3" data-number="3.3.8">
<h3 data-number="3.3.8" class="anchored" data-anchor-id="common-testing-patterns"><span class="header-section-number">3.3.8</span> Common Testing Patterns</h3>
<section id="testing-exceptions" class="level4" data-number="3.3.8.1">
<h4 data-number="3.3.8.1" class="anchored" data-anchor-id="testing-exceptions"><span class="header-section-number">3.3.8.1</span> Testing Exceptions</h4>
<p>Verify that your code raises the right exceptions:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pytest</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> my_package.validate <span class="im">import</span> validate_username</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_validate_username_too_short():</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> pytest.raises(<span class="pp">ValueError</span>) <span class="im">as</span> excinfo:</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>        validate_username(<span class="st">"ab"</span>)  <span class="co"># Too short</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> <span class="st">"Username must be at least 3 characters"</span> <span class="kw">in</span> <span class="bu">str</span>(excinfo.value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="testing-with-temporary-files" class="level4" data-number="3.3.8.2">
<h4 data-number="3.3.8.2" class="anchored" data-anchor-id="testing-with-temporary-files"><span class="header-section-number">3.3.8.2</span> Testing with Temporary Files</h4>
<p>Test file operations safely:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_save_to_file(tmp_path):</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># tmp_path is a built-in pytest fixture</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    file_path <span class="op">=</span> tmp_path <span class="op">/</span> <span class="st">"test.txt"</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Test file writing</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    save_to_file(file_path, <span class="st">"test content"</span>)</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Verify content</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> file_path.read_text() <span class="op">==</span> <span class="st">"test content"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="mocking" class="level4" data-number="3.3.8.3">
<h4 data-number="3.3.8.3" class="anchored" data-anchor-id="mocking"><span class="header-section-number">3.3.8.3</span> Mocking</h4>
<p>Isolate your code from external dependencies using the pytest-mock plugin:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_fetch_user_data(mocker):</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Mock the API call</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    mock_response <span class="op">=</span> mocker.patch(<span class="st">'requests.get'</span>)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    mock_response.return_value.json.return_value <span class="op">=</span> {<span class="st">"id"</span>: <span class="dv">1</span>, <span class="st">"name"</span>: <span class="st">"Test User"</span>}</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Test our function</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    <span class="im">from</span> my_package.api <span class="im">import</span> get_user</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    user <span class="op">=</span> get_user(<span class="dv">1</span>)</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Verify results</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> user[<span class="st">'name'</span>] <span class="op">==</span> <span class="st">"Test User"</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>    mock_response.assert_called_once_with(<span class="st">'https://api.example.com/users/1'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="testing-strategy" class="level3" data-number="3.3.9">
<h3 data-number="3.3.9" class="anchored" data-anchor-id="testing-strategy"><span class="header-section-number">3.3.9</span> Testing Strategy</h3>
<p>As your project grows, organize tests into different categories:</p>
<ol type="1">
<li><strong>Unit tests</strong>: Test individual functions/classes in isolation</li>
<li><strong>Integration tests</strong>: Test interactions between components</li>
<li><strong>Functional tests</strong>: Test entire features from a user perspective</li>
</ol>
<p>Most projects should have a pyramid shape: many unit tests, fewer integration tests, and even fewer functional tests.</p>
</section>
<section id="continuous-testing" class="level3" data-number="3.3.10">
<h3 data-number="3.3.10" class="anchored" data-anchor-id="continuous-testing"><span class="header-section-number">3.3.10</span> Continuous Testing</h3>
<p>Make testing a habitual part of your workflow:</p>
<ol type="1">
<li><strong>Run relevant tests as you code</strong>: Many editors integrate with pytest</li>
<li><strong>Run full test suite before committing</strong>: Use pre-commit hooks</li>
<li><strong>Run tests in CI</strong>: Catch issues that might only appear in different environments</li>
</ol>
<p>By incorporating comprehensive testing into your development process, you’ll catch bugs earlier, ship with more confidence, and build a more maintainable codebase.</p>
<p>In the next section, we’ll explore static type checking with mypy, which can help catch a whole new category of errors before your code even runs.</p>
</section>
</section>
<section id="type-checking-with-mypy" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="type-checking-with-mypy"><span class="header-section-number">3.4</span> Type Checking with mypy</h2>
<p>Python is dynamically typed, which provides flexibility but can also lead to type-related errors that only appear at runtime. Static type checking with mypy adds an extra layer of verification, catching many potential issues before your code executes.</p>
<section id="understanding-type-hints" class="level3" data-number="3.4.1">
<h3 data-number="3.4.1" class="anchored" data-anchor-id="understanding-type-hints"><span class="header-section-number">3.4.1</span> Understanding Type Hints</h3>
<p>Python 3.5+ supports type hints, which are annotations indicating what types of values functions expect and return:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> greeting(name: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="ss">f"Hello, </span><span class="sc">{</span>name<span class="sc">}</span><span class="ss">!"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>These annotations don’t change how Python runs—they’re ignored by the interpreter at runtime. However, tools like mypy can analyze them statically to catch potential type errors.</p>
</section>
<section id="getting-started-with-mypy" class="level3" data-number="3.4.2">
<h3 data-number="3.4.2" class="anchored" data-anchor-id="getting-started-with-mypy"><span class="header-section-number">3.4.2</span> Getting Started with mypy</h3>
<p>First, install mypy in your development environment:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install mypy</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Let’s check a simple example:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># example.py</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> double(x: <span class="bu">int</span>) <span class="op">-&gt;</span> <span class="bu">int</span>:</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">*</span> <span class="dv">2</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="co"># This is fine</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> double(<span class="dv">5</span>)</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="co"># This would fail at runtime</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>double(<span class="st">"hello"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Run mypy to check:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mypy</span> example.py</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Output:</p>
<pre><code>example.py:8: error: Argument 1 to "double" has incompatible type "str"; expected "int"</code></pre>
<p>mypy caught the type mismatch without running the code!</p>
</section>
<section id="configuring-mypy" class="level3" data-number="3.4.3">
<h3 data-number="3.4.3" class="anchored" data-anchor-id="configuring-mypy"><span class="header-section-number">3.4.3</span> Configuring mypy</h3>
<p>Configure mypy in your <code>pyproject.toml</code> file for a consistent experience:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[</span><span class="dt">tool</span><span class="kw">.</span><span class="dt">mypy</span><span class="kw">]</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="dt">python_version</span> <span class="op">=</span> <span class="st">"3.9"</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="dt">warn_return_any</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="dt">warn_unused_configs</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="dt">disallow_untyped_defs</span> <span class="op">=</span> <span class="cn">false</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="dt">disallow_incomplete_defs</span> <span class="op">=</span> <span class="cn">false</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Start with a lenient configuration and gradually increase strictness:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Starting configuration: permissive but helpful</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="kw">[</span><span class="dt">tool</span><span class="kw">.</span><span class="dt">mypy</span><span class="kw">]</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="dt">python_version</span> <span class="op">=</span> <span class="st">"3.9"</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="dt">warn_return_any</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="dt">check_untyped_defs</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="dt">disallow_untyped_defs</span> <span class="op">=</span> <span class="cn">false</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Intermediate configuration: more rigorous</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="kw">[</span><span class="dt">tool</span><span class="kw">.</span><span class="dt">mypy</span><span class="kw">]</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="dt">python_version</span> <span class="op">=</span> <span class="st">"3.9"</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a><span class="dt">warn_return_any</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a><span class="dt">disallow_incomplete_defs</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a><span class="dt">disallow_untyped_defs</span> <span class="op">=</span> <span class="cn">false</span></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a><span class="dt">check_untyped_defs</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Strict configuration: full typing required</span></span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a><span class="kw">[</span><span class="dt">tool</span><span class="kw">.</span><span class="dt">mypy</span><span class="kw">]</span></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a><span class="dt">python_version</span> <span class="op">=</span> <span class="st">"3.9"</span></span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a><span class="dt">disallow_untyped_defs</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a><span class="dt">disallow_incomplete_defs</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a><span class="dt">no_implicit_optional</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a><span class="dt">warn_redundant_casts</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a><span class="dt">warn_unused_ignores</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a><span class="dt">warn_return_any</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a><span class="dt">warn_unreachable</span> <span class="op">=</span> <span class="cn">true</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="gradual-typing" class="level3" data-number="3.4.4">
<h3 data-number="3.4.4" class="anchored" data-anchor-id="gradual-typing"><span class="header-section-number">3.4.4</span> Gradual Typing</h3>
<p>One major advantage of Python’s type system is gradual typing—you can add types incrementally:</p>
<ol type="1">
<li>Start with critical or error-prone modules</li>
<li>Add types to public interfaces first</li>
<li>Increase type coverage over time</li>
</ol>
</section>
<section id="essential-type-annotations" class="level3" data-number="3.4.5">
<h3 data-number="3.4.5" class="anchored" data-anchor-id="essential-type-annotations"><span class="header-section-number">3.4.5</span> Essential Type Annotations</h3>
<section id="basic-types" class="level4" data-number="3.4.5.1">
<h4 data-number="3.4.5.1" class="anchored" data-anchor-id="basic-types"><span class="header-section-number">3.4.5.1</span> Basic Types</h4>
<div class="sourceCode" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Variables</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>name: <span class="bu">str</span> <span class="op">=</span> <span class="st">"Alice"</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>age: <span class="bu">int</span> <span class="op">=</span> <span class="dv">30</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>height: <span class="bu">float</span> <span class="op">=</span> <span class="fl">1.75</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>is_active: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Lists, sets, and dictionaries</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>names: <span class="bu">list</span>[<span class="bu">str</span>] <span class="op">=</span> [<span class="st">"Alice"</span>, <span class="st">"Bob"</span>]</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>unique_ids: <span class="bu">set</span>[<span class="bu">int</span>] <span class="op">=</span> {<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>}</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>user_scores: <span class="bu">dict</span>[<span class="bu">str</span>, <span class="bu">int</span>] <span class="op">=</span> {<span class="st">"Alice"</span>: <span class="dv">100</span>, <span class="st">"Bob"</span>: <span class="dv">85</span>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="function-annotations" class="level4" data-number="3.4.5.2">
<h4 data-number="3.4.5.2" class="anchored" data-anchor-id="function-annotations"><span class="header-section-number">3.4.5.2</span> Function Annotations</h4>
<div class="sourceCode" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate_total(prices: <span class="bu">list</span>[<span class="bu">float</span>], tax_rate: <span class="bu">float</span> <span class="op">=</span> <span class="fl">0.0</span>) <span class="op">-&gt;</span> <span class="bu">float</span>:</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Calculate the total price including tax."""</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    subtotal <span class="op">=</span> <span class="bu">sum</span>(prices)</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> subtotal <span class="op">*</span> (<span class="dv">1</span> <span class="op">+</span> tax_rate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="class-annotations" class="level4" data-number="3.4.5.3">
<h4 data-number="3.4.5.3" class="anchored" data-anchor-id="class-annotations"><span class="header-section-number">3.4.5.3</span> Class Annotations</h4>
<div class="sourceCode" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Optional</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> User:</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, name: <span class="bu">str</span>, email: <span class="bu">str</span>, age: Optional[<span class="bu">int</span>] <span class="op">=</span> <span class="va">None</span>):</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.name: <span class="bu">str</span> <span class="op">=</span> name</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.email: <span class="bu">str</span> <span class="op">=</span> email</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.age: Optional[<span class="bu">int</span>] <span class="op">=</span> age</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> is_adult(<span class="va">self</span>) <span class="op">-&gt;</span> <span class="bu">bool</span>:</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""Check if user is an adult."""</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.age <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span> <span class="kw">and</span> <span class="va">self</span>.age <span class="op">&gt;=</span> <span class="dv">18</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="advanced-type-hints" class="level3" data-number="3.4.6">
<h3 data-number="3.4.6" class="anchored" data-anchor-id="advanced-type-hints"><span class="header-section-number">3.4.6</span> Advanced Type Hints</h3>
<section id="union-types" class="level4" data-number="3.4.6.1">
<h4 data-number="3.4.6.1" class="anchored" data-anchor-id="union-types"><span class="header-section-number">3.4.6.1</span> Union Types</h4>
<p>Use Union to indicate multiple possible types (use the <code>|</code> operator in Python 3.10+):</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Union</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Python 3.9 and earlier</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> process_input(data: Union[<span class="bu">str</span>, <span class="bu">list</span>[<span class="bu">str</span>]]) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">isinstance</span>(data, <span class="bu">list</span>):</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">", "</span>.join(data)</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> data</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Python 3.10+</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> process_input(data: <span class="bu">str</span> <span class="op">|</span> <span class="bu">list</span>[<span class="bu">str</span>]) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">isinstance</span>(data, <span class="bu">list</span>):</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">", "</span>.join(data)</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="optional-and-none" class="level4" data-number="3.4.6.2">
<h4 data-number="3.4.6.2" class="anchored" data-anchor-id="optional-and-none"><span class="header-section-number">3.4.6.2</span> Optional and None</h4>
<p><code>Optional[T]</code> is equivalent to <code>Union[T, None]</code> or <code>T | None</code>:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Optional</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> find_user(user_id: <span class="bu">int</span>) <span class="op">-&gt;</span> Optional[<span class="bu">dict</span>]:</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Return user data or None if not found."""</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Implementation...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="type-aliases" class="level4" data-number="3.4.6.3">
<h4 data-number="3.4.6.3" class="anchored" data-anchor-id="type-aliases"><span class="header-section-number">3.4.6.3</span> Type Aliases</h4>
<p>Create aliases for complex types:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Dict, List, Tuple</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Complex type</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>TransactionRecord <span class="op">=</span> Tuple[<span class="bu">str</span>, <span class="bu">float</span>, <span class="bu">str</span>, Dict[<span class="bu">str</span>, <span class="bu">str</span>]]</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="co"># More readable with alias</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> process_transactions(transactions: List[TransactionRecord]) <span class="op">-&gt;</span> <span class="bu">float</span>:</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>    total <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> _, amount, _, _ <span class="kw">in</span> transactions:</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>        total <span class="op">+=</span> amount</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> total</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="callable" class="level4" data-number="3.4.6.4">
<h4 data-number="3.4.6.4" class="anchored" data-anchor-id="callable"><span class="header-section-number">3.4.6.4</span> Callable</h4>
<p>Type hint for functions:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Callable</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> apply_function(func: Callable[[<span class="bu">int</span>], <span class="bu">str</span>], value: <span class="bu">int</span>) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Apply a function that converts int to str."""</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> func(value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="common-challenges-and-solutions" class="level3" data-number="3.4.7">
<h3 data-number="3.4.7" class="anchored" data-anchor-id="common-challenges-and-solutions"><span class="header-section-number">3.4.7</span> Common Challenges and Solutions</h3>
<section id="working-with-third-party-libraries" class="level4" data-number="3.4.7.1">
<h4 data-number="3.4.7.1" class="anchored" data-anchor-id="working-with-third-party-libraries"><span class="header-section-number">3.4.7.1</span> Working with Third-Party Libraries</h4>
<p>Not all libraries provide type hints. For popular packages, you can often find stub files:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install types-requests</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>For others, you can silence mypy warnings selectively:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> untyped_library  <span class="co"># type: ignore</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="dealing-with-dynamic-features" class="level4" data-number="3.4.7.2">
<h4 data-number="3.4.7.2" class="anchored" data-anchor-id="dealing-with-dynamic-features"><span class="header-section-number">3.4.7.2</span> Dealing with Dynamic Features</h4>
<p>Python’s dynamic features can be challenging to type. Use <code>Any</code> when necessary:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Any, Dict</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> parse_config(config: Dict[<span class="bu">str</span>, Any]) <span class="op">-&gt;</span> Dict[<span class="bu">str</span>, Any]:</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Parse configuration with unknown structure."""</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Implementation...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="integration-with-your-workflow" class="level3" data-number="3.4.8">
<h3 data-number="3.4.8" class="anchored" data-anchor-id="integration-with-your-workflow"><span class="header-section-number">3.4.8</span> Integration with Your Workflow</h3>
<section id="running-mypy" class="level4" data-number="3.4.8.1">
<h4 data-number="3.4.8.1" class="anchored" data-anchor-id="running-mypy"><span class="header-section-number">3.4.8.1</span> Running mypy</h4>
<div class="sourceCode" id="cb44"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check a specific file</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="ex">mypy</span> src/my_package/module.py</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the entire package</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="ex">mypy</span> src/my_package/</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Use multiple processes for faster checking</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="ex">mypy</span> <span class="at">-p</span> my_package <span class="at">--python-version</span> 3.9 <span class="at">--multiprocessing</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="integrating-with-cicd" class="level4" data-number="3.4.8.2">
<h4 data-number="3.4.8.2" class="anchored" data-anchor-id="integrating-with-cicd"><span class="header-section-number">3.4.8.2</span> Integrating with CI/CD</h4>
<p>Add mypy to your continuous integration workflow:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># GitHub Actions example</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Type check with mypy</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run</span><span class="kw">:</span><span class="at"> mypy src/</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="editor-integration" class="level4" data-number="3.4.8.3">
<h4 data-number="3.4.8.3" class="anchored" data-anchor-id="editor-integration"><span class="header-section-number">3.4.8.3</span> Editor Integration</h4>
<p>Most Python-friendly editors support mypy:</p>
<ul>
<li>VS Code: Use the Pylance extension</li>
<li>PyCharm: Has built-in type checking</li>
<li>vim/neovim: Use ALE or similar plugins</li>
</ul>
</section>
</section>
<section id="benefits-of-type-checking" class="level3" data-number="3.4.9">
<h3 data-number="3.4.9" class="anchored" data-anchor-id="benefits-of-type-checking"><span class="header-section-number">3.4.9</span> Benefits of Type Checking</h3>
<ol type="1">
<li><strong>Catch errors early</strong>: Find type-related bugs before running code</li>
<li><strong>Improved IDE experience</strong>: Better code completion and refactoring</li>
<li><strong>Self-documenting code</strong>: Types serve as documentation</li>
<li><strong>Safer refactoring</strong>: Change code with more confidence</li>
<li><strong>Gradual adoption</strong>: Add types where they provide the most value</li>
</ol>
</section>
<section id="when-to-use-type-hints" class="level3" data-number="3.4.10">
<h3 data-number="3.4.10" class="anchored" data-anchor-id="when-to-use-type-hints"><span class="header-section-number">3.4.10</span> When to Use Type Hints</h3>
<p>Type hints are particularly valuable for:</p>
<ul>
<li>Functions with complex parameters or return values</li>
<li>Public APIs used by others</li>
<li>Areas with frequent bugs</li>
<li>Critical code paths</li>
<li>Large codebases with multiple contributors</li>
</ul>
<p>Type checking isn’t an all-or-nothing proposition. Even partial type coverage can significantly improve code quality and catch common errors. Start small, focus on interfaces, and expand your type coverage as your team becomes comfortable with the system.</p>
</section>
</section>
<section id="security-analysis-with-bandit" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="security-analysis-with-bandit"><span class="header-section-number">3.5</span> Security Analysis with Bandit</h2>
<p>Software security is a critical concern in modern development, yet it’s often overlooked until problems arise. Bandit is a tool designed to find common security issues in Python code through static analysis.</p>
<section id="understanding-security-static-analysis" class="level3" data-number="3.5.1">
<h3 data-number="3.5.1" class="anchored" data-anchor-id="understanding-security-static-analysis"><span class="header-section-number">3.5.1</span> Understanding Security Static Analysis</h3>
<p>Unlike functional testing or linting, security-focused static analysis looks specifically for patterns and practices that could lead to security vulnerabilities:</p>
<ul>
<li>Injection vulnerabilities</li>
<li>Use of insecure functions</li>
<li>Hardcoded credentials</li>
<li>Insecure cryptography</li>
<li>And many other security issues</li>
</ul>
</section>
<section id="getting-started-with-bandit" class="level3" data-number="3.5.2">
<h3 data-number="3.5.2" class="anchored" data-anchor-id="getting-started-with-bandit"><span class="header-section-number">3.5.2</span> Getting Started with Bandit</h3>
<p>First, install Bandit in your virtual environment:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install bandit</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Run a basic scan:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Scan a specific file</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="ex">bandit</span> <span class="at">-r</span> src/my_package/main.py</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Scan your entire codebase</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="ex">bandit</span> <span class="at">-r</span> src/</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="security-issues-bandit-can-detect" class="level3" data-number="3.5.3">
<h3 data-number="3.5.3" class="anchored" data-anchor-id="security-issues-bandit-can-detect"><span class="header-section-number">3.5.3</span> Security Issues Bandit Can Detect</h3>
<p>Bandit identifies a wide range of security concerns, including:</p>
<section id="hardcoded-secrets" class="level4" data-number="3.5.3.1">
<h4 data-number="3.5.3.1" class="anchored" data-anchor-id="hardcoded-secrets"><span class="header-section-number">3.5.3.1</span> 1. Hardcoded Secrets</h4>
<div class="sourceCode" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Bandit will flag this</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> connect_to_database():</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>    password <span class="op">=</span> <span class="st">"super_secret_password"</span>  <span class="co"># Hardcoded secret</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> Database(<span class="st">"user"</span>, password)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="sql-injection" class="level4" data-number="3.5.3.2">
<h4 data-number="3.5.3.2" class="anchored" data-anchor-id="sql-injection"><span class="header-section-number">3.5.3.2</span> 2. SQL Injection</h4>
<div class="sourceCode" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Vulnerable to SQL injection</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_user(username):</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>    query <span class="op">=</span> <span class="ss">f"SELECT * FROM users WHERE username = '</span><span class="sc">{</span>username<span class="sc">}</span><span class="ss">'"</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> db.execute(query)</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Safer approach</span></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_user_safe(username):</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>    query <span class="op">=</span> <span class="st">"SELECT * FROM users WHERE username = </span><span class="sc">%s</span><span class="st">"</span></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> db.execute(query, (username,))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="shell-injection" class="level4" data-number="3.5.3.3">
<h4 data-number="3.5.3.3" class="anchored" data-anchor-id="shell-injection"><span class="header-section-number">3.5.3.3</span> 3. Shell Injection</h4>
<div class="sourceCode" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Vulnerable to command injection</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> run_command(user_input):</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> os.system(<span class="ss">f"ls </span><span class="sc">{</span>user_input<span class="sc">}</span><span class="ss">"</span>)  <span class="co"># User could inject commands</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Safer approach</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> subprocess</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> run_command_safe(user_input):</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> subprocess.run([<span class="st">"ls"</span>, user_input], capture_output<span class="op">=</span><span class="va">True</span>, text<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="insecure-cryptography" class="level4" data-number="3.5.3.4">
<h4 data-number="3.5.3.4" class="anchored" data-anchor-id="insecure-cryptography"><span class="header-section-number">3.5.3.4</span> 4. Insecure Cryptography</h4>
<div class="sourceCode" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using weak hash algorithms</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> hashlib</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hash_password(password):</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> hashlib.md5(password.encode()).hexdigest()  <span class="co"># MD5 is insecure</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="unsafe-deserialization" class="level4" data-number="3.5.3.5">
<h4 data-number="3.5.3.5" class="anchored" data-anchor-id="unsafe-deserialization"><span class="header-section-number">3.5.3.5</span> 5. Unsafe Deserialization</h4>
<div class="sourceCode" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Insecure deserialization</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pickle</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> load_user_preferences(data):</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pickle.loads(data)  <span class="co"># Pickle can execute arbitrary code</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="configuring-bandit" class="level3" data-number="3.5.4">
<h3 data-number="3.5.4" class="anchored" data-anchor-id="configuring-bandit"><span class="header-section-number">3.5.4</span> Configuring Bandit</h3>
<p>You can configure Bandit using a <code>.bandit</code> file or your <code>pyproject.toml</code>:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[</span><span class="dt">tool</span><span class="kw">.</span><span class="dt">bandit</span><span class="kw">]</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="dt">exclude_dirs</span> <span class="op">=</span> <span class="op">[</span><span class="st">"tests"</span><span class="op">,</span> <span class="st">"docs"</span><span class="op">]</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="dt">skips</span> <span class="op">=</span> <span class="op">[</span><span class="st">"B311"</span><span class="op">]</span>  <span class="co"># Skip random warning</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="dt">targets</span> <span class="op">=</span> <span class="op">[</span><span class="st">"src"</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The most critical findings are categorized with high severity and confidence levels:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Only report high-severity issues</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="ex">bandit</span> <span class="at">-r</span> src/ <span class="at">-iii</span> <span class="at">-ll</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="integrating-bandit-in-your-workflow" class="level3" data-number="3.5.5">
<h3 data-number="3.5.5" class="anchored" data-anchor-id="integrating-bandit-in-your-workflow"><span class="header-section-number">3.5.5</span> Integrating Bandit in Your Workflow</h3>
<section id="add-bandit-to-cicd" class="level4" data-number="3.5.5.1">
<h4 data-number="3.5.5.1" class="anchored" data-anchor-id="add-bandit-to-cicd"><span class="header-section-number">3.5.5.1</span> Add Bandit to CI/CD</h4>
<p>Add security scanning to your continuous integration pipeline:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># GitHub Actions example</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Security check with Bandit</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run</span><span class="kw">:</span><span class="at"> bandit -r src/ -f json -o bandit-results.json</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Optional: convert results to GitHub Security format</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a><span class="co"># (requires additional tools or post-processing)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="pre-commit-hook" class="level4" data-number="3.5.5.2">
<h4 data-number="3.5.5.2" class="anchored" data-anchor-id="pre-commit-hook"><span class="header-section-number">3.5.5.2</span> Pre-commit Hook</h4>
<p>Configure a pre-commit hook to run Bandit before commits:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># In .pre-commit-config.yaml</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">repo</span><span class="kw">:</span><span class="at"> https://github.com/PyCQA/bandit</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">rev</span><span class="kw">:</span><span class="at"> </span><span class="fl">1.7.5</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">hooks</span><span class="kw">:</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">id</span><span class="kw">:</span><span class="at"> bandit</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">args</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">"-r"</span><span class="kw">,</span><span class="at"> </span><span class="st">"src"</span><span class="kw">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="responding-to-security-findings" class="level3" data-number="3.5.6">
<h3 data-number="3.5.6" class="anchored" data-anchor-id="responding-to-security-findings"><span class="header-section-number">3.5.6</span> Responding to Security Findings</h3>
<p>When Bandit identifies security issues:</p>
<ol type="1">
<li><strong>Understand the risk</strong>: Read the detailed explanation to understand the potential vulnerability</li>
<li><strong>Fix high-severity issues immediately</strong>: These represent significant security risks</li>
<li><strong>Document deliberate exceptions</strong>: If a finding is a false positive, document why and use an inline ignore comment</li>
<li><strong>Review regularly</strong>: Security standards evolve, so regular scanning is essential</li>
</ol>
</section>
<section id="false-positives" class="level3" data-number="3.5.7">
<h3 data-number="3.5.7" class="anchored" data-anchor-id="false-positives"><span class="header-section-number">3.5.7</span> False Positives</h3>
<p>Like any static analysis tool, Bandit can produce false positives. You can exclude specific findings:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># In code, to ignore a specific line</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pickle  <span class="co"># nosec</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="co"># For a whole file</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="co"># nosec</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Or configure globally in pyproject.toml</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>By incorporating security scanning with Bandit, you add an essential layer of protection against common security vulnerabilities, helping to ensure that your code is not just functional but also secure.</p>
</section>
</section>
<section id="finding-dead-code-with-vulture" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="finding-dead-code-with-vulture"><span class="header-section-number">3.6</span> Finding Dead Code with Vulture</h2>
<p>As projects evolve, code can become obsolete but remain in the codebase, creating maintenance burdens and confusion. Vulture is a static analysis tool that identifies unused code – functions, classes, and variables that are defined but never used.</p>
<section id="the-problem-of-dead-code" class="level3" data-number="3.6.1">
<h3 data-number="3.6.1" class="anchored" data-anchor-id="the-problem-of-dead-code"><span class="header-section-number">3.6.1</span> The Problem of Dead Code</h3>
<p>Dead code creates several issues:</p>
<ol type="1">
<li><strong>Maintenance overhead</strong>: Every line of code needs maintenance</li>
<li><strong>Cognitive load</strong>: Developers need to understand code that serves no purpose</li>
<li><strong>False security</strong>: Tests might pass while dead code goes unchecked</li>
<li><strong>Misleading documentation</strong>: Dead code can appear in documentation generators</li>
</ol>
</section>
<section id="getting-started-with-vulture" class="level3" data-number="3.6.2">
<h3 data-number="3.6.2" class="anchored" data-anchor-id="getting-started-with-vulture"><span class="header-section-number">3.6.2</span> Getting Started with Vulture</h3>
<p>Install Vulture in your virtual environment:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install vulture</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Run a basic scan:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Scan a specific file</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="ex">vulture</span> src/my_package/main.py</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Scan your entire codebase</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="ex">vulture</span> src/</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="what-vulture-detects" class="level3" data-number="3.6.3">
<h3 data-number="3.6.3" class="anchored" data-anchor-id="what-vulture-detects"><span class="header-section-number">3.6.3</span> What Vulture Detects</h3>
<p>Vulture identifies:</p>
<section id="unused-variables" class="level4" data-number="3.6.3.1">
<h4 data-number="3.6.3.1" class="anchored" data-anchor-id="unused-variables"><span class="header-section-number">3.6.3.1</span> 1. Unused Variables</h4>
<div class="sourceCode" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> process_data(data):</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> []  <span class="co"># Defined but never used</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> item <span class="kw">in</span> data:</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>        processed <span class="op">=</span> transform(item)  <span class="co"># Unused variable</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>        data.append(item <span class="op">*</span> <span class="dv">2</span>)</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="unused-functions" class="level4" data-number="3.6.3.2">
<h4 data-number="3.6.3.2" class="anchored" data-anchor-id="unused-functions"><span class="header-section-number">3.6.3.2</span> 2. Unused Functions</h4>
<div class="sourceCode" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate_average(numbers):</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Calculate the average of a list of numbers."""</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> numbers:</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">sum</span>(numbers) <span class="op">/</span> <span class="bu">len</span>(numbers)</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="co"># If this function is never called anywhere, Vulture will flag it</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="unused-classes" class="level4" data-number="3.6.3.3">
<h4 data-number="3.6.3.3" class="anchored" data-anchor-id="unused-classes"><span class="header-section-number">3.6.3.3</span> 3. Unused Classes</h4>
<div class="sourceCode" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> LegacyFormatter:</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Format data using the legacy method."""</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, data):</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.data <span class="op">=</span> data</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="bu">format</span>(<span class="va">self</span>):</span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> json.dumps(<span class="va">self</span>.data)</span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a><span class="co"># If this class is never instantiated, Vulture will flag it</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="unused-imports" class="level4" data-number="3.6.3.4">
<h4 data-number="3.6.3.4" class="anchored" data-anchor-id="unused-imports"><span class="header-section-number">3.6.3.4</span> 4. Unused Imports</h4>
<div class="sourceCode" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sys  <span class="co"># If sys is imported but never used</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime, timedelta  <span class="co"># If timedelta is never used</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="handling-false-positives" class="level3" data-number="3.6.4">
<h3 data-number="3.6.4" class="anchored" data-anchor-id="handling-false-positives"><span class="header-section-number">3.6.4</span> Handling False Positives</h3>
<p>Vulture can sometimes flag code that’s actually used but in ways it can’t detect. Common cases include:</p>
<ul>
<li>Classes used through reflection</li>
<li>Functions called in templates</li>
<li>Code used in an importable public API</li>
</ul>
<p>You can create a whitelist file to suppress these reports:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># whitelist.py</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="co"># unused_function  # vulture:ignore</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Run Vulture with the whitelist:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="ex">vulture</span> src/ whitelist.py</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="configuration-and-integration" class="level3" data-number="3.6.5">
<h3 data-number="3.6.5" class="anchored" data-anchor-id="configuration-and-integration"><span class="header-section-number">3.6.5</span> Configuration and Integration</h3>
<p>Add Vulture to your workflow:</p>
<section id="command-line-options" class="level4" data-number="3.6.5.1">
<h4 data-number="3.6.5.1" class="anchored" data-anchor-id="command-line-options"><span class="header-section-number">3.6.5.1</span> Command Line Options</h4>
<div class="sourceCode" id="cb66"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set minimum confidence (default is 60%)</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="ex">vulture</span> <span class="at">--min-confidence</span> 80 src/</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Exclude test files</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a><span class="ex">vulture</span> src/ <span class="at">--exclude</span> <span class="st">"test_*.py"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="ci-integration" class="level4" data-number="3.6.5.2">
<h4 data-number="3.6.5.2" class="anchored" data-anchor-id="ci-integration"><span class="header-section-number">3.6.5.2</span> CI Integration</h4>
<div class="sourceCode" id="cb67"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># GitHub Actions example</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Find dead code with Vulture</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run</span><span class="kw">:</span><span class="at"> vulture src/ --min-confidence 80</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="best-practices-for-dead-code-removal" class="level3" data-number="3.6.6">
<h3 data-number="3.6.6" class="anchored" data-anchor-id="best-practices-for-dead-code-removal"><span class="header-section-number">3.6.6</span> Best Practices for Dead Code Removal</h3>
<ol type="1">
<li><strong>Verify before removing</strong>: Confirm the code is truly unused</li>
<li><strong>Use version control</strong>: Remove code through proper commits with explanations</li>
<li><strong>Update documentation</strong>: Ensure documentation reflects the changes</li>
<li><strong>Run tests</strong>: Confirm nothing breaks when the code is removed</li>
<li><strong>Look for patterns</strong>: Clusters of dead code often indicate larger architectural issues</li>
</ol>
</section>
<section id="when-to-run-vulture" class="level3" data-number="3.6.7">
<h3 data-number="3.6.7" class="anchored" data-anchor-id="when-to-run-vulture"><span class="header-section-number">3.6.7</span> When to Run Vulture</h3>
<ul>
<li>Before major refactoring</li>
<li>During codebase cleanup</li>
<li>As part of regular maintenance</li>
<li>When preparing for a significant release</li>
<li>When onboarding new team members (helps them focus on what matters)</li>
</ul>
<p>Regularly checking for and removing dead code keeps your codebase lean and maintainable. It also provides insights into how your application has evolved and may highlight areas where design improvements could be made.</p>
<p>With these additional security and code quality tools in place, your Python development workflow is now even more robust. Let’s move on to Part 3, where we’ll explore documentation and deployment options.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../chapters/01-foundation.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">From Zero to Production: A Practical Python Development Pipeline</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../chapters/03-documentation.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">From Zero to Production: A Practical Python Development Pipeline</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>